function js_beautify(xb,z){var V="SPACE",K="NEWLINE",P="else",gb="function",fb="throw",O="BLOCK",J=",",eb="TK_UNKNOWN",B="TK_STRING",I="return",H="TK_COMMENT",db="TK_BLOCK_COMMENT",A="TK_SEMICOLON",w="TK_END_BLOCK",v="TK_START_BLOCK",G="TK_END_EXPR",s="TK_START_EXPR",n="TK_OPERATOR",o="TK_WORD",F="TK_EOF",E=":",U="DO_BLOCK",X="(EXPRESSION)",L="[INDENTED-EXPRESSION]",Q="[EXPRESSION]",m="",r="\n",b=false,j=true,W="undefined",q=" ",c,g,e,d,i,cb,C,f,hb,D,pb,ab,ib,a,T,qb,u,Y,R,N,M,S;z=z||{};var jb=z.indent_size||4,wb=z.indent_char||q,tb=typeof z.preserve_newlines===W?j:z.preserve_newlines,vb=z.indent_level||0,sb=z.space_after_anon_function===W?b:z.space_after_anon_function;S=b;function ob(){while(g.length&&(g[g.length-1]===q||g[g.length-1]===D))g.pop()}function h(a){a=typeof a===W?j:a;f.if_line=b;ob();if(!g.length)return;if(g[g.length-1]!==r||!a){S=j;g.push(r)}for(var c=0;c<N;c+=1)g.push(D)}function l(){var a=q;if(g.length)a=g[g.length-1];a!==q&&a!==r&&a!==D&&g.push(q)}function k(){S=b;g.push(e)}function bb(){N+=1}function Z(){if(N)N-=1}function mb(){g.length&&g[g.length-1]===D&&g.pop()}function ub(){var a=e.split(r);g.push(a[0]);for(var b=1;b<a.length;b++){h();g.push(q);g.push(a[b].replace(/^\s+/,m))}}function y(a){f&&hb.push(f);f={mode:a,var_line:b,var_line_tainted:b,if_line:b,in_case:b}}function lb(a){return a===Q||a===L||a===X}function nb(){R=f.mode===U;f=hb.pop()}function p(d,c){for(var a=0;a<c.length;a+=1)if(c[a]===d)return j;return b}function yb(){for(var a=0,c=0,d=g.length-1;d>=0;d--)switch(g[d]){case E:if(a===0)c++;break;case "?":if(a===0)if(c===0)return j;else c--;break;case "{":if(a===0)return b;a--;break;case "(":case "[":a--;break;case ")":case "]":case "}":a++}}function kb(){var g="/",x=0;if(a>=c.length)return [m,F];var e=c.charAt(a);a+=1;while(p(e,pb)){if(a>=c.length)return [m,F];if(e===r)x+=1;e=c.charAt(a);a+=1}M=b;if(tb){if(x>1)for(var z=0;z<2;z+=1)h(z===0);M=x===1}if(p(e,ab)){if(a<c.length)while(p(c.charAt(a),ab)){e+=c.charAt(a);a+=1;if(a===c.length)break}if(a!==c.length&&e.match(/^[0-9]+[Ee]$/)&&(c.charAt(a)==="-"||c.charAt(a)==="+")){var C=c.charAt(a);a+=1;var D=kb(a);e+=C+D[0];return [e,o]}if(e==="in")return [e,n];M&&d!==n&&!f.if_line&&h();return [e,o]}if(e==="("||e==="[")return [e,s];if(e===")"||e==="]")return [e,G];if(e==="{")return [e,v];if(e==="}")return [e,w];if(e===";")return [e,A];if(e===g){var q=m;if(c.charAt(a)==="*"){a+=1;if(a<c.length)while(!(c.charAt(a)==="*"&&c.charAt(a+1)&&c.charAt(a+1)===g)&&a<c.length){q+=c.charAt(a);a+=1;if(a>=c.length)break}a+=2;return ["/*"+q+"*/",db]}if(c.charAt(a)===g){q=e;while(c.charAt(a)!=="\r"&&c.charAt(a)!==r){q+=c.charAt(a);a+=1;if(a>=c.length)break}a+=1;M&&h();return [q,H]}}if(e==="'"||e==='"'||e===g&&(d===o&&p(i,[I,"do"])||(d===s||d===v||d===w||d===n||d===F||d===A))){var t=e,k=b,l=e;if(a<c.length)if(t===g){var u=b;while(k||u||c.charAt(a)!==t){l+=c.charAt(a);if(!k){k=c.charAt(a)==="\\";if(c.charAt(a)==="[")u=j;else if(c.charAt(a)==="]")u=b}else k=b;a+=1;if(a>=c.length)return [l,B]}}else while(k||c.charAt(a)!==t){l+=c.charAt(a);if(!k)k=c.charAt(a)==="\\";else k=b;a+=1;if(a>=c.length)return [l,B]}a+=1;l+=t;if(t===g)while(a<c.length&&p(c.charAt(a),ab)){l+=c.charAt(a);a+=1}return [l,B]}if(e==="#"){var y="#";if(a<c.length&&p(c.charAt(a),qb)){do{e=c.charAt(a);y+=e;a+=1}while(a<c.length&&e!=="#"&&e!=="=");if(e==="#")return [y,o];else return [y,n]}}if(e==="<"&&c.substring(a-1,a+3)==="<!--"){a+=3;return ["<!--",H]}if(e==="-"&&c.substring(a-1,a+2)==="-->"){a+=2;M&&h();return ["-->",H]}if(p(e,ib)){while(a<c.length&&p(e+c.charAt(a),ib)){e+=c.charAt(a);a+=1;if(a>=c.length)break}return [e,n]}return [e,eb]}D=m;while(jb>0){D+=wb;jb-=1}N=vb;c=xb;C=m;d=s;i=m;cb=m;g=[];R=b;pb="\n\r\t ".split(m);ab="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(m);qb="0123456789".split(m);ib="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(q);T="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(J);hb=[];y(O);a=0;while(j){var rb=kb(a);e=rb[0];Y=rb[1];if(Y===F)break;switch(Y){case s:if(e==="["){if(d===o||i===")"){(C===I||C===fb)&&l();y(X);k();break}if(f.mode===Q||f.mode===L)if(cb==="]"&&i===J){bb();h();y(L)}else if(i==="["){bb();h();y(L)}else y(Q);else y(Q)}else y(X);if(i===";"||d===v)h();else if(!(d===G||d===s))if(d!==o&&d!==n)l();else if(C===gb)sb&&l();else p(C,T)&&l();k();break;case G:e==="]"&&f.mode===L&&Z();nb();k();break;case v:if(C==="do")y(U);else y(O);if(d!==n&&d!==s)if(d===v)h();else l();k();bb();break;case w:if(d===v){if(S)mb();else ob();Z()}else{Z();h()}k();nb();break;case o:if(R){l();k();l();R=b;break}if(e===gb)if(i===";"||i==="}"){h(b);h(b)}if(e==="case"||e==="default"){if(i===E)mb();else{Z();h();bb()}k();f.in_case=j;break}u="NONE";if(d===w)if(!p(e.toLowerCase(),[P,"catch","finally"]))u=K;else{u=V;l()}else if(d===A&&(f.mode===O||f.mode===U))u=K;else if(d===A&&lb(f.mode))u=V;else if(d===B)u=K;else if(d===o)u=V;else if(d===v)u=K;else if(d===G){l();u=K}if(d!==w&&p(e.toLowerCase(),[P,"catch","finally"]))h();else if(p(e,T)||u===K){if(i===P)l();else if(!((d===s||i==="="||i===J)&&e===gb))if(i===I||i===fb)l();else if(d!==G){if((d!==s||e!=="var")&&i!==E)if(e==="if"&&C===P&&i!=="{")l();else h()}else p(e,T)&&i!==")"&&h()}else u===V&&l();k();C=e;if(e==="var"){f.var_line=j;f.var_line_tainted=b}if(e==="if"||e===P)f.if_line=j;break;case A:k();f.var_line=b;break;case B:if(d===v||d===w||d===A)h();else d===o&&l();k();break;case n:var t=j,x=j;if(f.var_line&&e===J&&lb(f.mode))f.var_line_tainted=b;if(f.var_line)if(e===J)if(f.var_line_tainted){k();h();g.push(D);f.var_line_tainted=b;break}else f.var_line_tainted=b;else{f.var_line_tainted=j;if(e===E)f.var_line=b}if(i===I||i===fb){l();k();break}if(e===E&&f.in_case){k();h();f.in_case=b;break}if(e==="::"){k();break}if(e===J){if(f.var_line)if(f.var_line_tainted){k();h();f.var_line_tainted=b}else{k();l()}else if(d===w){k();h()}else if(f.mode===O){k();h()}else{k();l()}break}else if(e==="--"||e==="++")if(i===";")if(f.mode===O){h();t=j;x=b}else{t=j;x=b}else{i==="{"&&h();t=b;x=b}else if((e==="!"||e==="+"||e==="-")&&(i===I||i==="case")){t=j;x=b}else if((e==="!"||e==="+"||e==="-")&&d===s){t=b;x=b}else if(d===n){t=b;x=b}else if(d===G){t=j;x=j}else if(e==="."){t=b;x=b}else if(e===E)if(yb())t=j;else t=b;t&&l();k();x&&l();break;case db:h();if(e.substring(0,3)=="/**")ub();else k();h();break;case H:l();k();h();break;case eb:k()}cb=i;d=Y;i=e}return g.join(m).replace(/\n+$/,m)}